<!DOCTYPE html>
<html lang="de">
  <head>

    <meta charset="utf-8">
    <title>Posts tagged 'Docker'</title>
    <meta name="description" content="Posts tagged 'Docker'">
    <meta name="author"      content="Daniel Brunner">
    <meta name="keywords"    content="Docker">
    <meta name="viewport"    content="width=device-width, initial-scale=1.0">
    <link rel="icon"      href="/favicon.ico">
    <link rel="canonical" href="http://www.dbrunner.de/tags/Docker.html">


    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/scribble.css">
    <link rel="stylesheet" type="text/css" href="/css/dbr.css">
    <link rel="stylesheet" type="text/css" href="/css/pygments.css">
    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml"
          href="/feeds/Docker.atom.xml" title="Atom Feed">
    <link rel="alternate" type="application/rss+xml"
          href="/feeds/Docker.rss.xml" title="RSS Feed">
    <!-- JS -->
    <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
    <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
    <!-- <script type="text/javascript">
           (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
           (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
           m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
           })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

           ga('create', 'UA-xxxxx', 'auto');
           ga('send', 'pageview');
         </script> -->
  </head>
  <body>
    <!-- A standard Twitter Bootstrap nav bar -->
    <header class="navbar navbar-default navbar-inverse">
      <div class="container">
        <div class="navbar-header">
          <button type="button"
                  class="navbar-toggle"
                  data-toggle="collapse"
                  data-target=".our-nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>

          <a href="/index.html" class="navbar-brand">Daniel Brunner</a>
        </div>
        <div class="collapse navbar-collapse our-nav-collapse"
             role="navigation">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Über mich <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/ueber/index.html">Kurzvorstellung</a></li>
                <li><a href="/ueber/publikationen.html">Publikationen</a></li>
                <li><a href="/ueber/vortraege.html">Vorträge</a></li>
                <li><a href="/ueber/lehre.html">Lehre</a></li>
                <li><a href="/ueber/projekte.html">Projekte/Themen</a></li>
              </ul>
            </li>
            <li>
              <a href="/impressum/index.html">Impressum</a>
            </li> 
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Tags <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/index.html">All Posts</a></li>

<li><a href="/tags/Allerlei.html">Allerlei</a></li>

<li><a href="/tags/AWS.html">AWS</a></li>

<li><a href="/tags/Behörden.html">Behörden</a></li>

<li><a href="/tags/Common-Lisp.html">Common Lisp</a></li>

<li><a href="/tags/Docker.html">Docker</a></li>

<li><a href="/tags/Frog.html">Frog</a></li>

<li><a href="/tags/Homepage.html">Homepage</a></li>

<li><a href="/tags/IT.html">IT</a></li>

<li><a href="/tags/JavaScript.html">JavaScript</a></li>

<li><a href="/tags/Linux.html">Linux</a></li>

<li><a href="/tags/Medien.html">Medien</a></li>

<li><a href="/tags/Octopress.html">Octopress</a></li>

<li><a href="/tags/Org-Mode.html">Org-Mode</a></li>

<li><a href="/tags/Politik.html">Politik</a></li>

<li><a href="/tags/Racket.html">Racket</a></li>

<li><a href="/tags/Reisen.html">Reisen</a></li>

<li><a href="/tags/Scheme.html">Scheme</a></li>

<li><a href="/tags/Statistik.html">Statistik</a></li>

<li><a href="/tags/Steuern.html">Steuern</a></li>

<li><a href="/tags/Veranstaltungen.html">Veranstaltungen</a></li>

<li><a href="/tags/Wirtschaft.html">Wirtschaft</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Feeds <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/feeds/Docker.atom.xml">Atom</a></li>
                <li><a href="/feeds/Docker.rss.xml">RSS</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </header>
    <div class="container">
      <div class="row">

        <!-- Main column -->
        <div id="content" class="col-md-12">

<!--           -->

          <h1>Posts tagged <em>Docker</em></h1>

          <article>
  <header>
    <h1><a href='/2015/12/19/i-played-with-chicken-scheme-docker-and-alpine-linux/'>I played with CHICKEN Scheme, Docker and Alpine Linux</a></h1>
    <p class='date-and-tags'>
<time datetime="2015-12-19" pubdate="true">2015-12-19</time> :: <span class="tags"><a href="/tags/IT.html">IT</a>, <a href="/tags/Scheme.html">Scheme</a>, <a href="/tags/Docker.html">Docker</a>, <a href="/tags/Linux.html">Linux</a></span></p>
  </header>

<p>I am looking forward to meet LISP people at the <a href="https://events.ccc.de/congress/2015/wiki/Main_Page">32c3&rsquo;s</a> <a href="https://events.ccc.de/congress/2015/wiki/Assembly:The_%28un%29employed_schemers_%26_lispers_guild">LISP assembly</a>. The last days I played a bit with different Scheme implementations including  <a href="http://call-cc.org">CHICKEN scheme</a>. The main feature of CHICKEN is that it compiles the Scheme code to C and then creates dynamic libraries and binaries with the C compiler. I thought that combining these binaries with a minimal Docker container could give me a very small deployment. So here are my steps:</p>

<h2 id="choosing-alpine-linux-as-a-small-linux">Choosing Alpine Linux as a &ldquo;small&rdquo; Linux</h2>

<p>The smallest Linux image for Docker is undoubtly busybox with a size of about 2.489 MB. But busybox lacks a package manager which makes installing software painful. Therefore I have chosen <a href="http://alpinelinux.org">Alpine Linux</a> which comes with package manager and it&rsquo;s image&rsquo;s size is about 5.234 MB. That&rsquo;s double the size of the busybox image but still quite small compared to the Ubuntu image which is about 266 MB.</p>

<h2 id="creating-a-docker-container-with-chicken">Creating a Docker container with CHICKEN</h2>

<p>Alpine Linux comes with the <a href="http://www.muscl-libc.org">musl libc</a> and I thought it would be best to compile all the CHICKEN stuff with that libc. Therefore I created a Docker container with gcc and all the other stuff with this Dockerfile (<a href="https://github.com/krrrcks/chicken-docker-alpine">Github repository</a>):</p>

<pre><code>FROM alpine:3.2

RUN apk update &amp;&amp; apk add make gcc musl-dev 
RUN wget -O - http://code.call-cc.org/releases/4.10.0/chicken-4.10.0.tar.gz | tar xz

WORKDIR /chicken-4.10.0

RUN make PLATFORM=linux &amp;&amp; make PLATFORM=linux install

RUN rm -fr /chicken-4.10.0 

WORKDIR /

CMD ["csi"]</code></pre>

<p>This image is quite big (about 161.7 MB) and is available for download at the <a href="https://hub.docker.com/r/krrrcks/chicken-alpine/">Docker Hub</a>.</p>

<h2 id="compiling-some-chicken-code">Compiling some CHICKEN code</h2>

<p>For testing purposes I wanted a minimal web server running in the Alpine Linux image. Therefore I looked through the <a href="http://wiki.call-cc.org/chicken-projects/egg-index-4.html">egg index</a> and found <a href="http://wiki.call-cc.org/eggref/4/spiffy">spiffy</a>. I fired up the <code>chicken-alpine</code> container (but I used <code>ash</code> as command instead of the <code>csi</code> Scheme interpreter) and created a small web server that serves some static pages. I wrote a <code>main.scm</code>:</p>

<pre><code>(use spiffy)
(start-server)</code></pre>

<p>and added some static pages to a <code>./web</code> sub-directory. Then everything had to be compiled and prepared for deployment:</p>

<pre><code>chicken-install spiffy
csc -deploy main.scm
chicken-install -deploy -p $PWD/main spiffy</code></pre>

<h2 id="deploy-in-a-fresh-alpine-linux-image">Deploy in a fresh Alpine Linux image</h2>

<p>After the compilation I copied the <code>main</code> and <code>web</code> directories on my host machine using <code>docker cp</code> and created the following Dockerfile:</p>

<pre><code>FROM alpine:3.2

ADD main /main
ADD web main/web
WORKDIR main

CMD /main/main</code></pre>

<p>and let <code>docker build -t krrrcks/spiffy-test .</code> do the job. The size of the resulting image is about 12.37 MB and that&rsquo;s pretty small. I uploaded that image to the <a href="https://hub.docker.com/r/krrrcks/spiffy-test/">Docker Hub</a> as well.</p>

<p>To serve the pages I did a <code>docker run -d -p 8080:8080 krrrcks/spiffy-test</code>  (spiffy listens on port 8080 in the default install) and browsed my static pages.</p>

</article>
<article>
  <header>
    <h1><a href='/2015/01/18/3-docker-meetup-in-frankfurt/'>
<ol>
 <li>Docker-Meetup in Frankfurt</li></ol></a></h1>
    <p class='date-and-tags'>
<time datetime="2015-01-18" pubdate="true">2015-01-18</time> :: <span class="tags"><a href="/tags/IT.html">IT</a>, <a href="/tags/Docker.html">Docker</a>, <a href="/tags/Veranstaltungen.html">Veranstaltungen</a></span></p>
  </header>

<p>Am 13. Januar 2015 fand in Frankfurt das bereits <a href="http://www.meetup.com/Docker-Frankfurt/events/219160756/">dritte Docker-Meetup</a> statt, hier einige Notizen von mir dazu.</p>

<h2 id="neues-zum-them-orchestrierung">Neues zum Them Orchestrierung</h2>

<p><a href="https://www.twitter.com/PRossbach">Peter Rossbach</a> hat in einem munteren Vortrag einige Neuerungen aus dem &ldquo;Docker Universum&rdquo; zum Thema Orchestrierung vorgestellt. Unter anderem <a href="https://github.com/docker/machine">Docker Machine</a>, <a href="https://github.com/docker/swarm">Docker Swarm</a>, Docker Compose (ehemals <a href="http://fig.sh">fig.sh</a>, das wohl aufgrund von Aussprachemehrdeutigkeiten umbenannt wurde) etc. Ein sehr interessanter Überblick, insbesondere da Peter auch die ganzen Sachen immer mal angefasst und ausprobiert hat. Im Kern scheint es mir jedoch so zu sein, als wäre die Frage nach &ldquo;Was nimmt man am besten, um Docker auf einer oder mehreren Maschinen im Produktivbetrieb zu nutzen?&rdquo; noch recht in Bewegung. Für mich kristallisiert sich für meine Anwendungsfälle da bisher noch keine überzeugende Lösung heraus. Was ich jedoch einmal testen werde ist das fig.sh bzw. Docker Compose, da man damit eigentlich sehr schön in einem YAML-Dokument mehrere Container und ihre Abhängigkeiten darstellen kann.</p>

<h2 id="docker-linking">Docker Linking</h2>

<p><a href="http://linsenraum.de">Erkan Yanar</a> hat in einem Einsteigervortrag die Grundlagen von Links zwischen Containern vorgestellt. Hier scheint die Entwicklung auch noch in Bewegung zu sein, insbesondere Links über mehrere Hosts hinweg scheinen doch noch nicht so ganz einfach handzuhaben zu sein (vorgestellt wurden <a href="https://github.com/SvenDowideit/dockerfiles/blob/master/ambassador/Dockerfile">Ambassador-Ansätze</a> mit <a href="http://www.dest-unreach.org/socat/">socat</a> und anderes).</p>

<p>Besonders erhellend fand ich den Hinweis, dass ab Docker Version 1.3 nun bei Links zwischen den Containern die <code>/etc/hosts</code> auch nach Neustarts von gelinkten Containern immer deren richtige IP-Adresse erhält, wohingegen die Umgebungsvariablen nur die Ursprungs-IP-Adressen enthalten (also ein klares &ldquo;Verlasst Euch nicht auf die Umgebungsvariablen!&rdquo;).</p>

<h2 id="netzwerken-mit-docker">Netzwerken mit Docker</h2>

<p><a href="https:/www.twitter.com/aschmidt75">Andreas Schmidt</a> stellte eine ganze Reihe von Varianten vor, mit denen man die Container im Netzwerk auf unterschiedliche Arten und Weisen verknoten kann. Soweit ganz interessant, aber nicht meine &ldquo;Liga&rdquo;, wo ich mich gut auskenne.</p>

<h2 id="fazit">Fazit</h2>

<p>Bei Docker in Bezug auf Orchestrierung und Container-Linken gibt es recht viel Bewegung und für mich kristallisieren sich die überzeugenden Konzepte noch nicht so richtig heraus, um damit in eine Produktivumgebung zu gehen. Im Bereich der Entwicklung und der Tests nutze ich die Container von Docker schon recht gerne, bei Produktiv-Umgebungen schreckt mich die Vielzahl an Werkzeugen und zum Teil auch die Komplexität doch noch etwas.</p>

<p>Jedenfalls wieder ein gutes Meetup mit Ideen und Anregungen. Ich finde das schon sehr außergewöhnlich (besonders wenn man es mit anderen Branchen vergleicht), dass sich Leute zum Austauschen über Technologie treffen, Vorträge vorbereiten etc.</p>

<h2 id="links-zu-den-folien">Links zu den Folien</h2>

<ul>
 <li><a href="https://speakerdeck.com/rossbachp/docker-meetup-frankfurt-2015-docker-orchestration">Peter Rossbach, Docker Orchestation</a></li>
 <li><a href="https://speakerdeck.com/aschmidt75/docker-networking">Andreas Schmidt, Docker Networking</a></li></ul>

</article>
<article>
  <header>
    <h1><a href='/2014/10/05/erfahrungen-mit-docker/'>Erfahrungen mit Docker</a></h1>
    <p class='date-and-tags'>
<time datetime="2014-10-05" pubdate="true">2014-10-05</time> :: <span class="tags"><a href="/tags/Docker.html">Docker</a></span></p>
  </header>

<p>Ein Bekannter bat mich, einmal von meinen Erfahrungen mit Docker zu berichten. Also hier als Blog-Post dazu. Ich werde nicht beschreiben, was genau Docker ist und wie es funktioniert. Hierzu gibt es mittlerweile schon eine Reihe von guten Quellen (bspw. auf der Docker-Homepage, in der c&rsquo;t war in Heft 17 (Seiten 146&ndash;151) auch eine ganz gute Einführung enthalten).</p>

<h2 id="hintergrund">Hintergrund</h2>

<p>Seit einigen Jahren verwende ich zum Ausrollen von Software OpenVZ als Container-Lösung. Das funktioniert sehr gut, schont die Ressourcen, lässt sich gut verwalten und überwachen. In den OpenVZ-Containern befindet sich ein kleines Linux der gewünschten Distribution mit so allem, was man im Standard dafür erwartet. Darin installiert und konfiguriert man seine Software und rollt sie dann auf dem Zielsystem bequem aus. Der einzige Nachteil hierbei ist, dass der Host einen eigenen OpenVZ-Kernel benötigt, da nicht oder noch nicht alle Features im Standard-Kernel bereit stehen. Das macht das Zusammenstellen auf meinem Notebook etwas schwierig, denn dort habe ich den OpenVZ-Kernel in der Regel nicht installiert.</p>

<h2 id="warum-nun-docker">Warum nun Docker?</h2>

<p>Im April bin ich eher zufällig (tauchte in den Release-Notes von Ubuntu 14.04 auf) auf das Docker-Projekt gestoßen und habe damit begonnen herumzuexperimentieren.</p>

<p>Rund um Docker und den Einsatz haben sich eine Vielzahl von Projekten angesammelt. Nicht alles verstehe ich auf Anhieb und mir fällt es zum Teil auch schwer, die unterschiedlichen Projekte zum Ausrollen, Verwalten etc. zu bewerten und zu entscheiden, was davon auch &ldquo;zukunftsfähig&rdquo; ist. Wahrscheinlich muss man hier auch ein bisschen Geduld haben.</p>

<h2 id="einsatzbereiche">Einsatzbereiche</h2>

<p>Für mich haben sich im Wesentlichen zwei Haupteinsatzbereiche herauskristallisiert:  * als Werkzeug in der Software-Entwicklung und  * als Werkzeug zum Ausrollen und dauerhaften Betrieb von Anwendungen</p>

<h3 id="werkzeug-in-der-software-entwicklung">Werkzeug in der Software-Entwicklung</h3>

<p>Ich arbeite in Teams zusammen, bei denen die Entwickler mal nen Windows-Notebook und mal nen Linux-Notebook ihr Eigen nennen. Docker bot sich hier an, eine definitierte Test- und Entwicklungsplattform bereit zu stellen. Ich habe dazu alles, was man so braucht in ein Image zusammengeworfen, dies lässt sich mit dem aktuellen Source Code starten.</p>

<h3 id="dauerhafter-betrieb">Dauerhafter Betrieb</h3>

<h2 id="eigenarten-und-erfahrungen">Eigenarten und Erfahrungen</h2>

<h2 id="was-toll-ist">Was toll ist:</h2>

<ul>
 <li>Sehr leicht zu installieren und man kann schnell damit anfangen herumzuspielen.</li>
 <li>docker build / Dockerfile</li>
 <li>Es entwickelt sich sehr schnell eine aktive Gemeinschaft, so habe  ich auch schon an MeetUps in Frankfurt und Darmstadt  mit Gewinn teilgenommen.</li>
 <li>Nicht zu vergessen das Logo.</li></ul>

<h2 id="was-nicht-so-toll-ist">Was nicht so toll ist:</h2>

<ul>
 <li>
  <p>Images und Container erhalten zur Identifikation Hash-Werte; man  kann Images und Container auch mit Namen versehen. Ist man  allerdings ein wenig am experimentieren und herumbasteln, so sammeln  sich schnell eine Reihe von Containern mit wenig sprechenden Ids an  und zumindest ich verliere da schnell den Überblick.</p></li>
 <li>
  <p>Eigentlich sind die Container nicht so mobil, wie die Analogie es  vermuten lässt. Am ehesten sind es noch die Images, die man in eine  Registry einspielen und dann auf unterschiedlichen Systemen  herunterlädt. Mir würde allerdings auch so etwas wie Live Migration  (funktioniert beispielsweise bei OpenVZ für meine Einsatzzwecke ganz  hervorragend) gefallen.</p></li>
 <li>
  <p>Für den dauerhaften Betrieb gibt es eine Reihe von für mich offenen  Fragen. Hierzu gibt es zwar Lösungsansätze oder Produkte, aber viele  entwickeln sich erst. Ich will einmal exemplarisch einige offene  Enden herausgreifen:</p></li>
 <li>
  <p>Irgendwie muss man sich um seine Logfiles kümmern, wo die so  landen sollen. Hat man in einem &ldquo;normalen Linux&rdquo; (oder auch einem  Standard-OpenVZ-Container) meist so etwas wie ein logrotated am  laufen, so fehlt das (wenn man der Docker-Philosophie folgt, die  Container so schlank wie möglich zu halten) in einem  Docker-Deployment. Also muss man für jede Anwendung prüfen:  Schreibt sie ihr Log auf Platte? Dann muss man das da irgendwie  herausholen (bspw. über einen Log-File-Volume) oder überwachen,  nutzt sie syslogd muss man das auch irgendwie in den Griff  bekommen oder rotzt sie ihre Meldungen über die Standardausgabe  heraus, dann sammelt immerhin Docker die auf und man kann darin  blättern (die können dort aber auch recht groß werden).</p></li>
 <li>
  <p>Was tut man mit persistenten Daten? Also beispielsweise einer  Datenbank? Der Docker-Weg-zum-Glück bietet an, dass man einen  Container mit der Datenbank erstellt und dann einen für die  jeweilige Anwendung (ist bspw. für das Wordpress-Image auch so gut  zu studieren). Damit die Daten der Datenbank nicht in dem  Container herumliegen, kann man diese noch in ein Volume  packen. Damit die beiden Container nun miteinander kommunizieren  können, kann man deren Daten über Links einander bekannt  machen. Da man sich als Container und Anwendung nicht um  IP-Adressen etc. kümmern &ldquo;soll&rdquo;, ist das auch ganz fein. So erhält  man im Anwendungscontainer dann Umgebungsvariablen zum  Datenbankcontainer sowie auch einen Eintrag in /etc/hosts. Dumm  nur, wenn der Datenbankcontainer mal abschmiert und neu gestartet  werden muss, denn dann erhält er in der Regel eine neue IP-Adresse  und der Link vom Anwendungscontainer zur Datenbank funktioniert  nicht mehr. Sicher, es gibt nun Mittel und Wege damit umzugehen  (DNS-Geschichten, Entdecken der Dienste, etc.), aber ich fände es  eigentlich toll, wenn das Out-of-the-box funktionieren würde.</p></li></ul>

<h2 id="fazit">Fazit</h2>

<p>Ich finde es ein spannendes Projekt und wenn sich für mich die einen oder anderen Unklarheiten lichten, werde ich es sicherlich auch für den Produktiveinsatz in Erwägung ziehen. Ich vermute, dass das Projekt sich noch deutlich weiterentwickeln wird, die knapp 65 Mio Venture Capital werden neben Marketing hoffentlich auch ins Produkt gesteckt.</p>

</article>
<article>
  <header>
    <h1><a href='/2014/07/24/mind-the-storage-driver-for-ubuntu-cloud-images-on-azure/'>Mind the storage driver for Ubuntu cloud images (on Azure)</a></h1>
    <p class='date-and-tags'>
<time datetime="2014-07-24" pubdate="true">2014-07-24</time> :: <span class="tags"><a href="/tags/Docker.html">Docker</a>, <a href="/tags/IT.html">IT</a></span></p>
  </header>

<p>A few days ago I wanted to build Firefox OS&rsquo; newest release for a friend. Because I did not wanted these GB of code, binaries etc. on my notebook I fired up an Ubuntu image on Microsoft Azure. I feared that at a certain point in the build process I may had to download everything to my local machine and therefore I installed Docker via a simple</p>

<pre><code>sudo apt-get install docker.io</code></pre>

<p>Then I started the build process as laid out on Mozilla&rsquo;s Developer Network. But, during downloading the source code (that&rsquo;s about 12 GB of Git repositories from Mozilla and Android), I got a &ldquo;no more space left on device&rdquo;. That was strange: I had a 100 GB volume attached to the VM and enough space and inodes left. After some searching I asked on the IRC channel and got a good hint: &ldquo;What&rsquo;s your storage driver?&rdquo;</p>

<p>Well, I thought that it&rsquo;s AUFS; I wanted to add &ldquo;as usual&rdquo; because AUFS was available on my notebook from the beginning. But a <code>docker.io
info</code> gave me:</p>

<pre><code>$ sudo docker.io info
Containers: 0
Images: 0
Storage Driver: devicemapper
 Pool Name: docker-8:1-131188-pool
 Data file: /var/lib/docker/devicemapper/devicemapper/data
 Metadata file: /var/lib/docker/devicemapper/devicemapper/metadata
 Data Space Used: 291.5 Mb
 Data Space Total: 102400.0 Mb
 Metadata Space Used: 0.7 Mb
 Metadata Space Total: 2048.0 Mb
Execution Driver: native-0.1
Kernel Version: 3.13.0-29-generic
WARNING: No swap limit support</code></pre>

<p>I then learned that somehow the DeviceMapper driver only allows a certain amount of diffs and I reached that amount with my build process. (Maybe it&rsquo;s possible to relax that restriction but I do not know how.)</p>

<p>I learned as well that the Ubuntu cloud image that is provided by Microsoft Azure doesn&rsquo;t have AUFS support. Therefore Docker uses the DeviceMapper storage driver instead. After I installed the AUFS support I could export the images, change the storage driver and import the images again.</p>

<p>It would be nice seeing the Docker documentation being more detailed on those storage drivers.</p>

<p><strong>(Update 2014&ndash;10&ndash;23)</strong> Thanks to  <a href="http://blog.iron.io/2014/10/docker-in-production-what-weve-learned.html">this blog post from Iron.io</a>  I found some documentation of the devicemapper storage driver. It is  located in the  <a href="https://github.com/docker/docker/tree/master/daemon/graphdriver/devmapper">Repository</a>.</p>

</article>
<article>
  <header>
    <h1><a href='/2014/06/10/unicode-support-for-octopress/'>Unicode support for Octopress</a></h1>
    <p class='date-and-tags'>
<time datetime="2014-06-10" pubdate="true">2014-06-10</time> :: <span class="tags"><a href="/tags/Docker.html">Docker</a>, <a href="/tags/Octopress.html">Octopress</a>, <a href="/tags/IT.html">IT</a></span></p>
  </header>

<p>Well, it seems Octopress/Jekyll would like to have a locale set for UTF&ndash;8 support. I followed <a href="http://www.dominik-gaetjens.de/blog/2012/06/09/utf-8-in-octopress/">this (text in German)</a> hint and now my Dockerfile looks like this:</p>

<pre><code># dockerfile for octopress

FROM ubuntu:14.04
MAINTAINER krrrcks &lt;krrrcks@krrrcks.net&gt;
ENV DEBIAN_FRONTEND noninteractive

RUN apt-get update; \
  apt-get -q -y upgrade
RUN /usr/sbin/locale-gen en_US.UTF-8; \
  update-locale LANG=en_US.UTF-8
RUN apt-get -q -y install git curl; \
  apt-get clean
RUN git clone git://github.com/imathis/octopress.git /opt/octopress
RUN curl -L https://get.rvm.io | bash -s stable --ruby
ENV HOME /root
RUN echo "export LC_ALL=en_US.UTF-8" &gt;&gt; /root/.bashrc
RUN echo "export LANG=en_US.UTF-8" &gt;&gt; /root/.bashrc
RUN echo "source /usr/local/rvm/scripts/rvm" &gt;&gt; /root/.bashrc; 
RUN /bin/bash -l -c "source /usr/local/rvm/scripts/rvm; \
  rvm install 1.9.3; \
  rvm use 1.9.3; \
  rvm rubygems latest; \
  cd /opt/octopress; \
  gem install bundler; \
  bundle install; \
  rake install" 
RUN echo "rvm use 1.9.3" &gt;&gt; /root/.bashrc

WORKDIR /opt/octopress
EXPOSE 4000
CMD ["/bin/bash"] </code></pre>

<p>After playing around with Docker and Octopress I put the whole <code>/opt/octopress</code> folder on my host machine and then  restarted the image with the <code>-v</code> flag. Therefore I can edit the files on my host machine with my favorite editor and use the container only for producing the HTML files, for preview and for publishing.</p>

<p>The <code>rake preview</code> is a neat feature because the server always looks for changed files and produces the HTML files on the fly. That means I can edit the files in my editor and could see the resulting pages in a  browser nearly the same time.</p>

</article>
<article>
  <header>
    <h1><a href='/2014/05/26/my-dockerfile-for-setting-up-octopress/'>My Dockerfile for setting up Octopress</a></h1>
    <p class='date-and-tags'>
<time datetime="2014-05-26" pubdate="true">2014-05-26</time> :: <span class="tags"><a href="/tags/Docker.html">Docker</a>, <a href="/tags/Octopress.html">Octopress</a>, <a href="/tags/IT.html">IT</a></span></p>
  </header>

<p>After my trouble with installing all the dependencies for Octopress I  came up with the following Dockerfile for Docker. This follows the  instructions from the Octopress homepage and uses RVM for managing the ruby dependencies.</p>

<pre><code># dockerfile for octopress

FROM ubuntu:14.04
MAINTAINER krrrcks &lt;krrrcks@krrrcks.net&gt;
ENV DEBIAN_FRONTEND noninteractive

RUN apt-get update; \
  apt-get -q -y upgrade
RUN apt-get -q -y install git curl; \
  apt-get clean
RUN git clone git://github.com/imathis/octopress.git /opt/octopress
RUN curl -L https://get.rvm.io | bash -s stable --ruby
ENV HOME /root
RUN echo "source /usr/local/rvm/scripts/rvm" &gt;&gt; /root/.bashrc; 
RUN /bin/bash -l -c "source /usr/local/rvm/scripts/rvm; \
  rvm install 1.9.3; \
  rvm use 1.9.3; \
  rvm rubygems latest; \
  cd /opt/octopress; \
  gem install bundler; \
  bundle install; \
  rake install" 
RUN echo "rvm use 1.9.3" &gt;&gt; /root/.bashrc

WORKDIR /opt/octopress
EXPOSE 4000
CMD ["/bin/bash"] </code></pre>

</article>
        </div>
      </div>
      <footer>
        <hr />
        <p><a href="https://twitter.com/krrrcks"
              class="twitter-follow-button"
              data-show-count="false"
              data-lang="en">
             "Follow krrrcks"
           </a>
           <script type="text/javascript">
             !function(d,s,id){
                 var js,fjs=d.getElementsByTagName(s)[0];
                 if(!d.getElementById(id)){
                     js=d.createElement(s);
                     js.id=id;
                     js.src="//platform.twitter.com/widgets.js";
                     fjs.parentNode.insertBefore(js,fjs);
                 }
             }(document,"script","twitter-wjs");
           </script></p>
        <p>Made with  <a href="https://github.com/greghendershott/frog">Frog</a> and <a href="http://www.racket-lang.org">Racket</a>. Using <a href="http://www.getbootstrap.com">Bootstrap</a>.</p>
        <p><em>(C) 2017, Daniel Brunner</em>.</p>
      </footer>
    </div>
    <!-- </body> JS -->
    <script type="text/javascript" src="/js/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  </body>
</html>